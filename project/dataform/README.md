# Dataform Definitions

This directory contains Dataform SQLX definitions for all data transformations.

Initialized from **Module C: dataform-warehouse-blueprints** template.

## Structure

```
dataform/
├── dataform.json              # Dataform project config
├── package.json               # Node dependencies
├── environments.json          # Environment configs (dev/test/prod)
├── includes/
│   ├── constants.js           # Dataset names, constants
│   └── helpers.js             # Reusable JS functions
├── definitions/
│   ├── raw/                   # Raw layer (minimal transforms)
│   │   ├── raw_employees.sqlx
│   │   ├── raw_jobs.sqlx
│   │   ├── raw_schedules.sqlx
│   │   ├── raw_timecards.sqlx
│   │   ├── raw_payroll_runs.sqlx
│   │   └── raw_cost_centers.sqlx
│   ├── staging/               # Staging layer (clean, validated)
│   │   ├── stg_employees.sqlx
│   │   ├── stg_jobs.sqlx
│   │   ├── stg_schedules.sqlx
│   │   ├── stg_timecards.sqlx
│   │   ├── stg_payroll_runs.sqlx
│   │   └── stg_cost_centers.sqlx
│   ├── warehouse/             # Dimensional model
│   │   ├── dimensions/
│   │   │   ├── dim_employee.sqlx      # Generated by Module B
│   │   │   ├── dim_job.sqlx
│   │   │   ├── dim_date.sqlx
│   │   │   └── dim_cost_center.sqlx
│   │   └── facts/
│   │       ├── fact_payroll_run.sqlx
│   │       └── fact_timecard.sqlx
│   └── marts/                 # Business marts
│       ├── mart_payroll_costs.sqlx
│       ├── mart_overtime_trends.sqlx
│       ├── mart_headcount_workforce.sqlx
│       └── mart_privacy_anonymized.sqlx
└── tests/
    └── assertions.sql
```

## Naming Conventions

- **Raw**: `raw_{domain}` - Mirror source with audit columns
- **Staging**: `stg_{domain}` - Clean, deduplicated, standardized
- **Warehouse Dims**: `dim_{entity}` - Dimensional model
- **Warehouse Facts**: `fact_{entity}` - Fact tables
- **Marts**: `mart_{business_area}` - Business-ready aggregates

## Development

```bash
# Install dependencies
npm install

# Compile (check syntax)
dataform compile

# Run in dev
dataform run --env dev

# Run specific tag
dataform run --tags staging
```

## Deployment

See `/project/scripts/deploy/deploy_dataform.sh`

